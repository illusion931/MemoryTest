<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-D4H26L164H"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-D4H26L164H');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-translate="title">Number Memory Game</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="game-container">
        <div class="welcome-screen">
            <h1 data-translate="title">Number Memory Game</h1>
            <div class="rules">
                <h2 data-translate="rules.title">Game Rules</h2>
                <ul>
                    <li data-translate="rules.rule1">Each level shows a sequence of numbers</li>
                    <li data-translate="rules.rule2">Remember the sequence within 3 seconds</li>
                    <li data-translate="rules.rule3">Input the numbers in the correct order</li>
                    <li data-translate="rules.rule4">Progress through levels to improve your memory</li>
                    <li data-translate="rules.rule5">Game ends if you make a mistake</li>
                </ul>
            </div>
            <button class="control-btn" onclick="startGame()" data-translate="startButton">Start Game</button>
        </div>

        <div class="game-screen">
            <div class="progress-container">
                <div class="progress-bar"></div>
            </div>
            <div class="level"><span data-translate="level">Level</span>: <span id="currentLevel">1</span></div>
            <div class="number-display"></div>
            <div class="countdown"></div>
            <div class="player-input"></div>
            <div class="number-pad">
                <button class="number-btn" onclick="inputNumber(1)">1</button>
                <button class="number-btn" onclick="inputNumber(2)">2</button>
                <button class="number-btn" onclick="inputNumber(3)">3</button>
                <button class="number-btn" onclick="inputNumber(4)">4</button>
                <button class="number-btn" onclick="inputNumber(5)">5</button>
                <button class="number-btn" onclick="inputNumber(6)">6</button>
                <button class="number-btn" onclick="inputNumber(7)">7</button>
                <button class="number-btn" onclick="inputNumber(8)">8</button>
                <button class="number-btn" onclick="inputNumber(9)">9</button>
                <button class="number-btn" onclick="inputNumber(0)">0</button>
                <button class="number-btn submit-btn" onclick="submitAnswer()">✓</button>
                <button class="number-btn clear-btn" onclick="clearInput()">⌫</button>
            </div>
        </div>

        <div class="game-over">
            <h2 data-translate="gameOver">Game Over!</h2>
            <p><span data-translate="score">Score</span>: <span id="finalScore">0</span></p>
            <button class="control-btn" onclick="restartGame()" data-translate="restartButton">Play Again</button>
        </div>
    </div>

    <script src="../../js/translations.js"></script>
    <script>
        // 获取URL中的语言参数
        function getUrlLanguage() {
            const params = new URLSearchParams(window.location.search);
            return params.get('lang') || 'en';
        }

        // 更新页面文本
        function updatePageText(lang) {
            const elements = document.querySelectorAll('[data-translate]');
            elements.forEach(element => {
                const key = element.getAttribute('data-translate');
                const translation = translations[lang]?.games?.numberMemory?.[key] || translations[lang]?.[key];
                if (translation) {
                    element.textContent = translation;
                }
            });
            document.documentElement.setAttribute('lang', lang);
        }

        // 初始化语言
        document.addEventListener('DOMContentLoaded', () => {
            const lang = getUrlLanguage();
            updatePageText(lang);
        });
    </script>
    <script src="game.js"></script>
</body>
</html>
